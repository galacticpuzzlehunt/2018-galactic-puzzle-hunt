


<!DOCTYPE html>

<html
class="puzzle-page"
>
    <head>
        <meta charset="utf-8"><script type="text/javascript">window.NREUM||(NREUM={}),__nr_require=function(e,t,n){function r(n){if(!t[n]){var o=t[n]={exports:{}};e[n][0].call(o.exports,function(t){var o=e[n][1][t];return r(o||t)},o,o.exports)}return t[n].exports}if("function"==typeof __nr_require)return __nr_require;for(var o=0;o<n.length;o++)r(n[o]);return r}({1:[function(e,t,n){function r(){}function o(e,t,n){return function(){return i(e,[f.now()].concat(u(arguments)),t?null:this,n),t?void 0:this}}var i=e("handle"),a=e(2),u=e(3),c=e("ee").get("tracer"),f=e("loader"),s=NREUM;"undefined"==typeof window.newrelic&&(newrelic=s);var p=["setPageViewName","setCustomAttribute","setErrorHandler","finished","addToTrace","inlineHit","addRelease"],d="api-",l=d+"ixn-";a(p,function(e,t){s[t]=o(d+t,!0,"api")}),s.addPageAction=o(d+"addPageAction",!0),s.setCurrentRouteName=o(d+"routeName",!0),t.exports=newrelic,s.interaction=function(){return(new r).get()};var m=r.prototype={createTracer:function(e,t){var n={},r=this,o="function"==typeof t;return i(l+"tracer",[f.now(),e,n],r),function(){if(c.emit((o?"":"no-")+"fn-start",[f.now(),r,o],n),o)try{return t.apply(this,arguments)}catch(e){throw c.emit("fn-err",[arguments,this,e],n),e}finally{c.emit("fn-end",[f.now()],n)}}}};a("setName,setAttribute,save,ignore,onEnd,getContext,end,get".split(","),function(e,t){m[t]=o(l+t)}),newrelic.noticeError=function(e){"string"==typeof e&&(e=new Error(e)),i("err",[e,f.now()])}},{}],2:[function(e,t,n){function r(e,t){var n=[],r="",i=0;for(r in e)o.call(e,r)&&(n[i]=t(r,e[r]),i+=1);return n}var o=Object.prototype.hasOwnProperty;t.exports=r},{}],3:[function(e,t,n){function r(e,t,n){t||(t=0),"undefined"==typeof n&&(n=e?e.length:0);for(var r=-1,o=n-t||0,i=Array(o<0?0:o);++r<o;)i[r]=e[t+r];return i}t.exports=r},{}],4:[function(e,t,n){t.exports={exists:"undefined"!=typeof window.performance&&window.performance.timing&&"undefined"!=typeof window.performance.timing.navigationStart}},{}],ee:[function(e,t,n){function r(){}function o(e){function t(e){return e&&e instanceof r?e:e?c(e,u,i):i()}function n(n,r,o,i){if(!d.aborted||i){e&&e(n,r,o);for(var a=t(o),u=m(n),c=u.length,f=0;f<c;f++)u[f].apply(a,r);var p=s[y[n]];return p&&p.push([b,n,r,a]),a}}function l(e,t){v[e]=m(e).concat(t)}function m(e){return v[e]||[]}function w(e){return p[e]=p[e]||o(n)}function g(e,t){f(e,function(e,n){t=t||"feature",y[n]=t,t in s||(s[t]=[])})}var v={},y={},b={on:l,emit:n,get:w,listeners:m,context:t,buffer:g,abort:a,aborted:!1};return b}function i(){return new r}function a(){(s.api||s.feature)&&(d.aborted=!0,s=d.backlog={})}var u="nr@context",c=e("gos"),f=e(2),s={},p={},d=t.exports=o();d.backlog=s},{}],gos:[function(e,t,n){function r(e,t,n){if(o.call(e,t))return e[t];var r=n();if(Object.defineProperty&&Object.keys)try{return Object.defineProperty(e,t,{value:r,writable:!0,enumerable:!1}),r}catch(i){}return e[t]=r,r}var o=Object.prototype.hasOwnProperty;t.exports=r},{}],handle:[function(e,t,n){function r(e,t,n,r){o.buffer([e],r),o.emit(e,t,n)}var o=e("ee").get("handle");t.exports=r,r.ee=o},{}],id:[function(e,t,n){function r(e){var t=typeof e;return!e||"object"!==t&&"function"!==t?-1:e===window?0:a(e,i,function(){return o++})}var o=1,i="nr@id",a=e("gos");t.exports=r},{}],loader:[function(e,t,n){function r(){if(!x++){var e=h.info=NREUM.info,t=d.getElementsByTagName("script")[0];if(setTimeout(s.abort,3e4),!(e&&e.licenseKey&&e.applicationID&&t))return s.abort();f(y,function(t,n){e[t]||(e[t]=n)}),c("mark",["onload",a()+h.offset],null,"api");var n=d.createElement("script");n.src="https://"+e.agent,t.parentNode.insertBefore(n,t)}}function o(){"complete"===d.readyState&&i()}function i(){c("mark",["domContent",a()+h.offset],null,"api")}function a(){return E.exists&&performance.now?Math.round(performance.now()):(u=Math.max((new Date).getTime(),u))-h.offset}var u=(new Date).getTime(),c=e("handle"),f=e(2),s=e("ee"),p=window,d=p.document,l="addEventListener",m="attachEvent",w=p.XMLHttpRequest,g=w&&w.prototype;NREUM.o={ST:setTimeout,SI:p.setImmediate,CT:clearTimeout,XHR:w,REQ:p.Request,EV:p.Event,PR:p.Promise,MO:p.MutationObserver};var v=""+location,y={beacon:"bam.nr-data.net",errorBeacon:"bam.nr-data.net",agent:"js-agent.newrelic.com/nr-1071.min.js"},b=w&&g&&g[l]&&!/CriOS/.test(navigator.userAgent),h=t.exports={offset:u,now:a,origin:v,features:{},xhrWrappable:b};e(1),d[l]?(d[l]("DOMContentLoaded",i,!1),p[l]("load",r,!1)):(d[m]("onreadystatechange",o),p[m]("onload",r)),c("mark",["firstbyte",u],null,"api");var x=0,E=e(4)},{}]},{},["loader"]);</script><script type="text/javascript">window.NREUM||(NREUM={});NREUM.info={"beacon":"bam.nr-data.net","queueTime":0,"licenseKey":"0be415eea6","agent":"","transactionName":"ZgBRN0JSV0VZBxEMW19KdRZeUE1fVwpKFUFLH18GQx1PX10TFl9ERB9JD1U=","applicationID":"51841001","errorBeacon":"bam.nr-data.net","applicationTime":29}</script>

<title>The Great Galactic Bakery</title>

        <meta name="viewport" content="width=device-width, initial-scale=0.5">
        <link href="https://fonts.googleapis.com/css?family=Merriweather:400,400i,900" rel="stylesheet">
        <link rel="stylesheet" href="../static/Skeleton-2.0.4/css/normalize.css%3F1517035269.css">
        <link rel="stylesheet" href="../static/Skeleton-2.0.4/css/skeleton.css%3F1517035269.css">

<link rel="icon" sizes="16x16 32x32 48x48 64x64" href="../static/images/favicon.ico%3F1517887534" type="image/vnd.microsoft.icon">
<link rel="stylesheet" href="../static/css/base.css%3F1522332830.css">

        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.css">
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.1/jquery.min.js" crossorigin="anonymous"></script>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.js"></script>
        <script type="text/javascript" src="../static/js/jquery.formset.js%3F1517035269"></script>
        <script type="text/javascript" src="../static/puzzle_resources/the-great-galactic-bakery/biginteger.js"></script>
        <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">

        <style>
        #cookies {
          display: flex;
          margin-bottom: 50px;
          position: relative;
        }
        #cookies .cookie {
          flex: 1;
          position: relative;
        }
        #cookies .particle {
          position: absolute;
          margin-left: 50%;
          margin-top: -1em;
          transform: translateX(-50%);
          font-weight: bold;
          pointer-events: none;
          transition: 1s linear all;
          font-size: 32px;
        }
        #cookies .particle img {
          display: inline;
          height: 1em;
          width: 1em;
          vertical-align: middle;
        }
        #cookies .particle.float {
          opacity: 0;
          transform: translate(-50%, -50px);
        }
        #cookies img {
          width: 70%;
          image-rendering: optimizeSpeed; /* STOP SMOOTHING, GIVE ME SPEED  */
          image-rendering: -moz-crisp-edges; /* Firefox                        */
          image-rendering: -o-crisp-edges; /* Opera                          */
          image-rendering: -webkit-optimize-contrast; /* Chrome (and eventually Safari) */
          image-rendering: pixelated; /* Chrome */
          image-rendering: optimize-contrast; /* CSS3 Proposed                  */
          -ms-interpolation-mode: nearest-neighbor; /* IE8+                           */
          max-width: 256px;
          display: block;
          margin: 30px auto;
          transition: filter 0.1s, transform 0.3s cubic-bezier(.5,3,.5,.5)
        }
        #cookies img:hover {
          filter: brightness(1.2);
          transform: scale(1.04);
          cursor: pointer;
        }
        #cookies img:active {
          transform: scale(1);
        }
        .cookie-count {
          text-align: center;
          font-size: 24px;
        }


        .tools__container {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    grid-auto-rows: 1fr;
    grid-gap: 20px;
    width: 100%;
    margin-bottom: 20px;
}

@media(max-width:1000px) {
    .tools__container {
        grid-template-columns: repeat(1, 1fr);
    }
}

.tools__item {
    width: auto;
    align-items: flex-start;
    background-color: rgba(180, 160, 140, 0.3);
    padding: 16px;
    text-decoration: none;
    text-shadow: 0px 0px 6px #000,0px 1px 1px #000;
    cursor: pointer;
}

.tools__item:hover {
    background-color: rgba(180, 160, 140, 0.5);
}

.tools__item--inactive {
    opacity: 0.7;
    cursor: not-allowed;
}

.tools__item--inactive:hover {
    background-color: rgba(180, 160, 140, 0.3);
}

.tool_selected {
  border: solid #f8bc4e;
}

.tools__item-graphic {
    width: 70px;
    margin: 0 1rem 0 0;
}

@media(min-width: 1200px) {
    .tools__item-graphic {
        width: 100px;
        margin: 0 2rem 0 0;
    }
}

.tools__item h4 {
    font-weight: 500;
    margin: 0 0 0.5rem 0;
    color: #edece8;
}

.tools__item p {
    margin-bottom: 0;
}
        </style>

<script>


cookieHTML = `<div id="cookie-list">
        <div id="cookies">
            <div class="cookie" onclick="cookieClick('0')">
                <img src="../static/images/chocolatechip32.png%3F1521187167">
                <p class="cookie-count" id="cookie-count-0">314159265</p>

            </div>
            <div class="cookie" onclick="cookieClick('1')">
                <img src="../static/images/chessmen32.png%3F1521187167">
                <p class="cookie-count" id="cookie-count-1">358979323</p>

            </div>
            <div class="cookie" onclick="cookieClick('2')">
                <img src="../static/images/fortunecookie32.png%3F1521187167">
                <p class="cookie-count" id="cookie-count-2">846264338</p>

            </div>
            <div class="cookie" onclick="cookieClick('3')">
                <img src="../static/images/animalcracker32.png%3F1521187167">
                <p class="cookie-count" id="cookie-count-3">327950288</p>

            </div>
        </div>
    </div>
    <div class="tools__container">
        <div class="tools__item" id="tool-0" onclick="toolClick(0)">
            <div>
                <img class="tools__item-graphic" src="../static/images/robot32.png">
                <h4></h4>
            </div>
        </div>
        <div class="tools__item" id="tool-1" onclick="toolClick(1)">
            <div>
                <img class="tools__item-graphic" src="../static/images/novel32.png">
                <h4></h4>
            </div>
        </div>
        <div class="tools__item" id="tool-2" onclick="toolClick(2)">
            <div>
                <img class="tools__item-graphic" src="../static/images/radio32.png">
                <h4></h4>
            </div>
        </div>
        <div class="tools__item" id="tool-3" onclick="toolClick(3)">
            <div>
                <img class="tools__item-graphic" src="../static/images/oven32.png">
                <h4></h4>
            </div>
        </div>
    </div>
    <ul>
      <li><b>Android:</b> Select two piles. Add the number of cookies of the first type to the number of cookies of the second type.</li>
      <li><b>Best Selling Crime Novel:</b> Select a pile. Steal half the cookies (rounded down) from the cookie type with the most cookies and give them to this pile.</li>
      <li><b>Call Sign:</b> For each type of cookies, if the number of cookies of this type is equal to the phonespell of some number x, then replace the number of cookies in the pile with x. E.G., a pile with 896 = TWO cookies becomes a pile with two cookies after this operation, and a pile with 6639376749 = ONEZEROSIX cookies becomes a pile with 106 cookies after this operation.</li>
      <li><b>The Great Galactic Oven:</b> Reset cookie counts to their initial values.</li>
    </ul>
    <p>Good job on finding the Cookie Monster -- and the Great Galactic Oven! It is time to use the abilities you’ve unlocked to defeat him and take away ALL of his cookies! Yes, we must leave him with zero total cookies. We cannot risk any chance of this happening ever again.</p>
    <div id="cookies-msg">
    </div>`;

    var DIGITS = [
        '9376',
        '663',
        '896',
        '84733',
        '3687',
        '3483',
        '749',
        '73836',
        '34448',
        '6463'
    ];



    var COOKIE_MIN = 1000000;
    var COOKIE_MAX = 10000000;
    var BUTTER_OVERFLOW = BigInteger("100000000000000000000000000000000");


    var cookieCounts = [
                        BigInteger(314159265),
                        BigInteger(358979323),
                        BigInteger(846264338),
                        BigInteger(327950288)
                      ];
    var cookieNames = ['cookie', 'chessmen', 'fortune', 'animal']
    var N = cookieNames.length;
    var highlight = false;
    var highlight2 = false;
    var currentAbility = '';

    function getPrefix(s){
        for(var i=0;i<=9;i++){
            if(s.startsWith(DIGITS[i])){
                return i;
            }
        }
        return -1;
    }

    MINUS_ONE = BigInteger(-1);

    function decode(s){
        var answer = BigInteger.ZERO;
        while(s.length > 0){
            var pref = getPrefix(s);
            if(pref==-1){
                return MINUS_ONE;
            }else{
                answer = answer.multiply(10).add(pref);
            }

            s = s.substr(DIGITS[pref].length);
        }

        return answer;
    }

    var abilityA = function(from, to){
        cookieCounts[to] = cookieCounts[to].add(cookieCounts[from]);
        highlight=false;
        highlight2=false;
    }

    var abilityB = function(to){
        // find largest
        var largestI = 0;
        for(i=1;i<cookieNames.length;i++){
            if(cookieCounts[i].subtract(cookieCounts[largestI])
                             .isPositive()){
                largestI = i;
            }
        }


        var half = cookieCounts[largestI].divide(2);
        cookieCounts[largestI] = cookieCounts[largestI].subtract(half);
        cookieCounts[to] = cookieCounts[to].add(half);

        highlight=false;
        highlight2=false;
    }

    var abilityC = function() {
        for(var i=0;i<cookieNames.length;i++){
            var tryDecode = decode(cookieCounts[i].toString());
            if(!tryDecode.isNegative()) cookieCounts[i] = tryDecode;
        }
    }

    var abilityD = function() {
        cookieCounts = [
                            BigInteger(314159265),
                            BigInteger(358979323),
                            BigInteger(846264338),
                            BigInteger(327950288)
                          ];
    }

    var update = function() {
        total = BigInteger.ZERO;
        for(var i=0;i<N;i++){
            total = total.add(cookieCounts[i]);
        }

        if(total.subtract(BUTTER_OVERFLOW).isPositive()){
            abilityD();
        }

        if(total.isZero()){
            window.location.replace("https://www.youtube.com/watch?v=xjHSPyFjZpc");
        }

        for(var i=0;i<cookieNames.length;i++){
            cookieCountElement = document.getElementById("cookie-count-" + i);
            cookieCountElement.innerHTML = cookieCounts[i].toString();

            if(highlight){
              // cookieCountElement.addClass('highlight');
            } else{
              // cookieCountElement.removeClass('highlight');
            }

            if(highlight2){
              // cookieCountElement.addClass('highlight2');
            } else{
              // cookieCountElement.removeClass('highlight2');
            }
        }
    }

    window.onload = function() {
      if (document.cookie.split(';').filter(function(item) {
          return item.indexOf('cookie=mewantcookie_cupcake_corpse_charlie') >= 0
      }).length) {
        puzzleBody = document.getElementById("puzzle-body");
        puzzleBody.innerHTML = cookieHTML;
      } else {
        document.cookie = "cookie=username_answer1_answer2_answer3";
      };
    };

    function cookieClick(cookieID) {
      cookieCountElement = document.getElementById("cookie-count-" + cookieID);
      cookieCount = parseInt(cookieCountElement.innerHTML);

      if (highlight) {
          if (currentAbility == 'a') {
              from = cookieID;
              highlight = false;
              highlight2 = true;
          } else if (currentAbility == 'b') {
              abilityB(cookieID);
              removeSelection();
          }
      } else if (highlight2) {
          abilityA(from, cookieID);
          removeSelection();
      } else {
          cookieCounts[cookieID] = cookieCounts[cookieID].next();
      }
      update();
    }

    function removeSelection() {
        toolElement = document.getElementById("tool-" + 0);
        toolElement.classList.remove("tool_selected");
        toolElement = document.getElementById("tool-" + 1);
        toolElement.classList.remove("tool_selected");
    }

    function toolClick(toolID) {
      removeSelection();

      if (toolID == 0) {
          highlight2 = false;
          highlight = true;
          currentAbility = 'a';

          toolElement = document.getElementById("tool-" + toolID);
          toolElement.classList.add("tool_selected");
          update();
      } else if (toolID == 1) {
          highlight = true;
          currentAbility = 'b';
          toolElement = document.getElementById("tool-" + toolID);
          toolElement.classList.add("tool_selected");
          update();
      } else if (toolID == 2) {
          highlight = false;
          highlight2 = false;
          abilityC();
          update();
      } else {
          highlight = false;
          highlight2 = false;
          abilityD();
          update();
      }
    }

</script>



    </head>
    <body>
        <div class="top-bar-container">
             <div class="nav-inner-container">
                <nav class="main-nav">
                    <a href='../index.html'>Home</a>
                    <a href='../rules.html'>Rules</a>

                        <a href='../story.html'>Story</a>


                        <a href='../puzzles.html'>Puzzles</a>

                    <a href='../teams.html'>Teams</a>
                    <a href='../faq.html'>FAQ</a>

                        <a href='../errata.html'>Updates</a>


                        <a href='../wrapup.html'>Wrap-Up</a>

                    <a href='https://galacticpuzzlehunt.com/archive'>Archive</a>
                </nav>
             </div>
        </div>
        <div class="center">
            <div class="row">
                <div class="top-left-actions-container">





<a href="../solution/the-great-galactic-bakery.html" class="btn btn--small">View solution</a>
<a href="../stats/the-great-galactic-bakery.html" class="btn btn--small">Stats</a>


                </div>
                <div class="login-controls-container">

                    <a href="../puzzles.html" class="btn btn--small">All Puzzles</a>


            </div>
            <div class="content">


<div class="puzzle-page-body">
    <h1 class="page-header puzzle-page__title">

        The Great Galactic Bakery


    </h1>
    <div class="puzzle-body" id="puzzle-body">



<p>You arrive at the bakery to find it abandoned except for a lone inspector browsing through the stores of cookies. The Great Galactic Oven seems to have been stolen! This bakery’s security seems rather questionable.</p>
<p>“I’m sorry, but the Cookie Monster is in another bakery.”</p>
<p>“Oh well, at least we made it this far,” you sigh. <i>“That’s good enough for me.”</i></p>


    </div>
</div>


            </div>
        </div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-92192633-1', 'auto');
  ga('send', 'pageview');

</script>


        <div style="display: none">
            <img src="../static/images/btnleft8-h.png%3F1517887534">
            <img src="../static/images/btnmid8-h.png%3F1517887534">
            <img src="../static/images/btnright8-h.png%3F1517887534">
        </div>
    </body>
</html>
